(function () {if (!self.Prism) {return; } Prism.hooks.add('after-highlight', function (env) {var pre = env.element.parentNode; if (!pre || !/pre/i.test(pre.nodeName) || pre.className.indexOf('code-toolbar') === -1) {return; } var toolbar = document.createElement('div'); toolbar.setAttribute('class', 'toolbar'); if (window.ZeroClipboard) {var linkCopy = document.createElement('a'); linkCopy.innerHTML = 'Copy to clipboard'; var client = new ZeroClipboard(linkCopy); client.on("ready", function (event) {client.on("copy", function (event) {var node = event.target.parentNode.parentNode.getElementsByTagName('code')[0]; event.clipboardData.setData('text/plain', node.textContent || node.innerText); } ); client.on("aftercopy", function (event) {alert("Code copied to clipboard"); event.target.parentNode.parentNode.getElementsByTagName('code')[0].focus(); } ); } ); toolbar.appendChild(linkCopy); } pre.appendChild(toolbar); }); })();